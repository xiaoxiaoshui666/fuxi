<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        .wrap {
            width: 300px;
            margin: 20px auto 0;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
            border: 1px solid #c0c0c0;
            width: 300px;
        }

        th,
        td {
            border: 1px solid #d0d0d0;
            color: #404060;
            padding: 10px;
        }

        th {
            background-color: #09c;
            font: bold 16px "微软雅黑";
            color: #fff;
        }

        td {
            font: 14px "微软雅黑";
        }

        tbody tr {
            background-color: #f0f0f0;
        }

        tbody tr:hover {
            cursor: pointer;
            background-color: #fafafa;
        }

        li {
            list-style-type: none;
        }

        .tab {
            width: 978px;
            margin: 100px auto;
        }

        .tab_list {
            height: 39px;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
        }

        .tab_list li {
            float: left;
            height: 39px;
            line-height: 39px;
            padding: 0 20px;
            text-align: center;
            cursor: pointer;
        }

        .tab_list .current {
            background-color: #c81623;
            color: #fff;
        }

        .item_info {
            padding: 20px 0 0 20px;
        }

        .item {
            display: none;
        }

        table {
            width: 500px;
            margin: 10px auto;
            border-collapse: collapse;
            text-align: center;
        }

        td,
        th {
            border: 1px solid #333;
        }

        thead tr {
            height: 40px;
            background-color: #ccc;
        }

        img {
            position: absolute;
            top: 0px;
            left: 0px;
            width: 30px;
        }

        /* 京东快递单号放大 */
        .search {
            position: relative;
            width: 178px;
            margin: 100px;
        }

        .con {
            display: none;
            position: absolute;
            top: -40px;
            width: 171px;
            border: 1px solid rgba(0, 0, 0, .2);
            box-shadow: 0 2px 4px rgba(0, 0, 0, .2);
            padding: 5px 0;
            font-size: 18px;
            line-height: 20px;
            color: #333;
        }

        .con::before {
            content: '';
            width: 0;
            height: 0;
            position: absolute;
            top: 28px;
            left: 18px;
            border: 8px solid #000;
            border-style: solid dashed dashed;
            border-color: #fff transparent transparent;
        }
    </style>
</head>

<body>
    <!-- 排他思想 -->
    <button>按钮1</button>
    <button>按钮2</button>
    <button>按钮3</button>
    <button>按钮4</button>
    <button>按钮5</button>

    <!-- 全选反选复选框 -->
    <div class="wrap">
        <table>
            <thead>
                <tr>
                    <th><input type="checkbox" id="j_cbAll"></th>
                    <th>商品</th>
                    <th>价钱</th>
                </tr>
            </thead>
            <tbody id="j_tb">
                <tr>
                    <td>
                        <input type="checkbox" />
                    </td>
                    <td>小米2s</td>
                    <td>1000</td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox" />
                    </td>
                    <td>小米3s</td>
                    <td>1999</td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox" />
                    </td>
                    <td>小米4s</td>
                    <td>1500</td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox" />
                    </td>
                    <td>小米5s</td>
                    <td>1988</td>
                </tr>
            </tbody>
        </table>
    </div> -->

    <!-- tab栏切换 -->
    <div class="tab">
        <div class="tab_list">
            <ul>
                <li class="current">商品介绍</li>
                <li>规格与包装</li>
                <li>售后保障</li>
                <li>商品评价（50000）</li>
                <li>手机社区</li>
            </ul>
        </div>
        <div class="tab_con">
            <div class="item" style="display: block;">
                商品介绍模块内容
            </div>
            <div class="item">
                规格与包装模块内容
            </div>
            <div class="item">
                售后保障模块内容
            </div>
            <div class="item">
                商品评价（50000）模块内容
            </div>
            <div class="item">
                手机社区模块内容
            </div>

        </div>
    </div>

    <!-- 留言板 -->
    <textarea name="" id="">123</textarea>
    <button class="btn1">发布</button>
    <ul class="ul1"></ul>

    <!-- 动态生成表格 -->
    <table cellspacing="0">
        <thead>
            <tr>
                <th>姓名</th>
                <th>科目</th>
                <th>成绩</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody class="tbody">

        </tbody>


    </table>

    <!-- 跟随鼠标的图片 -->
    <img src="./imegs/男.jpg" alt="">

    <!-- 京东快递单号放大 -->
    <div class="search">
        <div class="con"></div>
        <input type="text" placeholder="请输入您的快递单号" class="jd">
    </div>
    <script>
        // 排他思想
        // 1. 所有元素全部清除样式(干掉其他人)        // 2. 给当前元素设置样式（留下我自己)
        var btn = document.querySelectorAll('button')
        for (var i = 0; i < btn.length; i++) {
            btn[i].onclick = function () {
                // 每当点击第i个按钮的时候，遍历所有的按钮先全部清除颜色
                for (var i = 0; i < btn.length; i++) {
                    btn[i].style.backgroundColor = ''
                }
                // 再让当前点的这个this按钮上色
                this.style.backgroundColor = 'orange';
            }

        }
        /* var btn = document.querySelectorAll('button')
        for (var i = 0; i < btn.length; i++) {
            btn[i].onmouseover = function () {
                this.style.backgroundColor = 'orange';
            }
            btn[i].onmouseout = function () {
                this.style.backgroundColor = '';
            }

        } */
        // 全选反选复选框
        var j_cbAll = document.querySelector('#j_cbAll');
        var j_tbs = document.querySelector('#j_tb').querySelectorAll('input');
        j_cbAll.onclick = function () {
            for (var i = 0; i < j_tbs.length; i++) {
                console.log(this.checked);
                // this.checked它可以得到当前复选框的选中状态如果是true就是选中，如果是false就是未选中
                j_tbs[i].checked = this.checked;
            }
        }
        /* for (var i = 0; i < j_tbs.length; i++) {  // 这个循环时为了给每个按钮绑定事件的
            j_tbs[i].onclick = function () {
                var flag = true;   // flag控制全选按钮的是否选中
                for (var i = 0; i < j_tbs.length; i++) {  // 如果遍历的某一个按钮没被选中，就让全选按钮不选中
                    if (!j_tbs[i].checked) {   // 如果都是选中就不执行if，flag永远为true
                        flag = false;          // 遍历的小按钮只要有一个没选中就执行if
                    }
                }
                j_cbAll.checked = flag;
            }
        } */
        for (var i = 0; i < j_tbs.length; i++) {
            j_tbs[i].onclick = function () {
                var flag = 0;
                for (var i = 0; i < j_tbs.length; i++) {
                    if (j_tbs[i].checked) {
                        flag++;
                    } else {
                        flag--;
                    }
                    console.log(flag);
                }
                console.log(flag);
                if (flag == 4) {
                    j_cbAll.checked = true;
                } else {
                    j_cbAll.checked = false;
                }
            }
        }

        // tab栏切换
        var lis = document.querySelector('.tab_list').querySelectorAll('li')
        var item = document.querySelectorAll('.item');
        for (var i = 0; i < lis.length; i++) {
            // 再点击之前给每个li设置自定义属性，便于使用这个索引号，不能i是因为i永远是循环结束的最后一个数，i是5
            lis[i].setAttribute('data-index', i);
            lis[i].onclick = function () {
                for (var i = 0; i < lis.length; i++) {
                    lis[i].className = '';  // 先清除所有的类
                }
                this.className = 'current';  // 当前this添加current类
                // 显示tab栏下的内容模块也要写在点击事件的里面
                var index = this.getAttribute('data-index');   // 得到当前this点击的这个li的index用于当item的索引
                for (var i = 0; i < lis.length; i++) {
                    item[i].style.display = 'none';    // 先清除所有的display显示
                }
                item[index].style.display = 'block';   // 点击哪个li 通过对应 item索引的index,得到当前item的索引，让他显示，因为点击的li和要显示的item是一一对应的关系
            }
        }

        // 留言板添加留言
        var text = document.querySelector('textarea');
        var btn1 = document.querySelector('.btn1')
        var ul1 = document.querySelector('.ul1')
        btn1.onclick = function () {
            if (text.value == '') {
                alert('请输入内容')
            } else {
                // 创建留言
                var li1 = document.createElement('li');
                li1.innerHTML = text.value + "<a href='javascript:;'>删除</a>"
                // 添加留言
                ul1.insertBefore(li1, ul1.children[0]);  // 在每个ul的第一个子元素前面添加一个li
                // 删除留言
                var as = document.querySelectorAll('a');
                for (var i = 0; i < as.length; i++) {
                    as[i].onclick = function () {    // 给所有的a一个点击事件
                        ul1.removeChild(this.parentNode);  // 删除ul里面的点击链接的父级li
                    }
                }
            }
        }


        // 动态生成表格
        // 1.先去准备好学生的数据
        var datas = [{
            name: '小李',
            subject: 'JavaScript',
            score: 100
        }, {
            name: '小王',
            subject: 'JavaScript',
            score: 98
        }, {
            name: '小红',
            subject: 'JavaScript',
            score: 99
        }, {
            name: '小玉',
            subject: 'JavaScript',
            score: 88
        }, {
            name: '小明',
            subject: 'JavaScript',
            score: 0
        }];
        // 2. 往tbody 里面创建行： 有几个人（通过数组的长度）我们就创建几行
        var tbody = document.querySelector('.tbody');
        for (var i = 0; i < datas.length; i++) {    // 外面的for循环管行 tr
            var tr = document.createElement('tr');       // 1. 创建 tr行
            tbody.appendChild(tr);
            // 2. 行里面创建单元格(跟数据有关系的3个单元格) td 单元格的数量取决于每个对象里面的属性个数  for循环遍历对象 datas[i]
            for (var k in datas[i]) {     // 里面的for循环管列 td   遍历对象
                var td = document.createElement('td');       // 创建单元格 
                td.innerHTML = datas[i][k];     // 把对象里面的属性值 datas[i][k] 给 td 
                tr.appendChild(td);
            }
            var td = document.createElement('td');        // 3. 创建有删除2个字的单元格
            td.innerHTML = '<a href="javascript:;">删除</a>';
            tr.appendChild(td);
        }
        var as = document.querySelectorAll('a');            // 4. 删除操作 开始 
        for (var i = 0; i < as.length; i++) {
            as[i].onclick = function () {
                // 点击a 删除当前a 所在的行(链接的父元素的父元素)  node.removeChild(child)  
                tbody.removeChild(this.parentNode.parentNode)
            }
        }
        // for(var k in obj) {
        //     k 得到的是属性名
        //     obj[k] 得到是属性值
        // }

        // 跟随鼠标的图片
        var img = document.querySelector('img')
        document.addEventListener('mousemove', function (e) {
            img.style.top = e.pageY + 20 + "px"
            img.style.left = e.pageX + "px"
        })

        // 京东快递单号放大
        var con = document.querySelector('.con');
        var jd_input = document.querySelector('.jd');
        jd_input.addEventListener('keyup', function () {
            if (jd_input.value == '') {
                con.style.display = 'none'
            } else {
                con.style.display = 'block';
                con.innerHTML = jd_input.value;
            }
        })
        jd_input.addEventListener('blur', function () {
            con.style.display = 'none'
        })
        jd_input.addEventListener('focus', function () {
            if (jd_input.value !== '') {
                con.style.display = 'block'
            }
        })
    </script>
</body>

</html>